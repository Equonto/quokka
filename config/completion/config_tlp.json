{
  "output_data_folder": "data/output/datafiles",
  "prefix": "proc:",
  "data_transformation_items": [
    {
      "input_data_filepath": "data/input/base_procedure_document.csv",
      "output_schema": [
        {
          "filename": "procedures.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "ProcedureId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintenanceProcedureProcess"
            },
            {
              "name": "procedureDocumentIri",
              "type": "CONSTRUCTED_IRI",
              "template": "{ProcedureId}_document"
            },
            {
              "name": "procedureName",
              "type": "TEXT",
              "template": "ProcedureName"
            }
          ]
        },
        {
          "filename": "procedure_documents.csv",
          "rdfs_type": "ompd:MaintenanceProcedureDocument",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{ProcedureId}_document"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintenanceProcedureDocument"
            },
            {
              "name": "documentLabel",
              "type": "CONSTRUCTED_TEXT",
              "template": "documentLabel_{ProcedureId}"
            },
            {
              "name": "hasTitle",
              "type": "TEXT",
              "template": "ProcedureName"
            }
          ]
        }
      ]
    },
    {
      "input_data_filepath": "data/input/base_procedure_hazards.csv",
      "output_schema": [
        {
          "filename": "hazard.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "HazardId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:Hazard"
            },
            {
              "name": "processIri",
              "type": "IRI",
              "template": "ProcessId"
            },
            {
              "name": "hazardLabel",
              "type": "CONSTRUCTED_TEXT",
              "template": "hazard_{HazardId}"
            },
            {
              "name": "hazardRealisationProcess",
              "type": "CONSTRUCTED_IRI",
              "template": "hazard_realisation_process_{HazardId}"
            },
            {
              "name": "hasHazardDescription",
              "type": "TEXT",
              "template": "HazardDescription"
            }
          ]
        }
      ]
    },
    {
      "input_data_filepath": "data/input/base_procedure_hazards.csv",
      "output_schema": [
        {
          "filename": "hazard.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "HazardId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:Hazard"
            },
            {
              "name": "processIri",
              "type": "IRI",
              "template": "ProcessId"
            },
            {
              "name": "hazardLabel",
              "type": "CONSTRUCTED_TEXT",
              "template": "hazard_{HazardId}"
            },
            {
              "name": "hazardRealisationProcess",
              "type": "CONSTRUCTED_IRI",
              "template": "hazard_realisation_process_{HazardId}"
            },
            {
              "name": "hasHazardDescription",
              "type": "TEXT",
              "template": "HazardDescription"
            }
          ]
        }
      ]
    },
    {
      "input_data_filepath": "data/input/base_procedure_tools.csv",
      "output_schema": [
        {
          "filename": "tools.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "ToolId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:Tool"
            },
            {
              "name": "processIri",
              "type": "IRI",
              "template": "ProcedureId"
            },
            {
              "name": "toolLabel",
              "type": "CONSTRUCTED_TEXT",
              "template": "tool_{ToolId}"
            },
            {
              "name": "hasToolName",
              "type": "TEXT",
              "template": "Name"
            },
            {
              "name": "hasUnits",
              "type": "TEXT",
              "template": "Units"
            },
            {
              "name": "hasQuantity",
              "type": "TEXT",
              "template": "Quantity"
            }
          ]
        }
      ]
    },
    {
      "input_data_filepath": "data/input/base_procedure_task.csv",
      "data_preprocessing_tasks": [
        {
          "type": "SPLIT_SENTENCES",
          "required_columns": [
            {
              "key": "id_column",
              "value": "StepId"
            },
            {
              "key": "parent_id_column",
              "value": "ParentStepId"
            },
            {
              "key": "text_column",
              "value": "StepText"
            },
            {
              "key": "sequence_column",
              "value": "Sequence"
            }
          ]
        },
        {
          "type": "CONVERT_SEQUENCE_TO_BEFORE_RELATION",
          "required_columns": [
            {
              "key": "id_column",
              "value": "StepId"
            },
            {
              "key": "parent_id_column",
              "value": "ParentStepId"
            },
            {
              "key": "group_id_column",
              "value": "ProcedureId"
            },
            {
              "key": "sequence_column",
              "value": "Sequence"
            },
            {
              "key": "output_column",
              "value": "BeforeStepId"
            }
          ]
        },
        {
          "type": "CHECK_ATOMICITY",
          "required_columns": [
            {
              "key": "id_column",
              "value": "StepId"
            },
            {
              "key": "parent_id_column",
              "value": "ParentStepId"
            },
            {
              "key": "output_column",
              "value": "IsAtomic"
            }
          ]
        }
      ],
      "text_preprocessing_tasks": ["LOWER", "LEMMATIZATION"],
      "ner_model": {
        "name": "nlp-tlp/mwo-ner-5",
        "type": "FLAIR"
      },
      "text_field": "StepText",
      "output_schema": [
        {
          "filename": "maintenance_tasks.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "StepId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintenanceTask"
            },
            {
              "name": "procedureIri",
              "type": "IRI",
              "template": "ProcedureId"
            },
            {
              "name": "taskName",
              "type": "CONSTRUCTED_TEXT",
              "template": "task_{StepId}"
            },
            {
              "name": "beforeMaintenanceTaskIri",
              "type": "IRI",
              "template": "BeforeStepId"
            },
            {
              "name": "parentMaintenanceTaskIri",
              "type": "IRI",
              "template": "ParentStepId"
            }
          ]
        },
        {
          "filename": "maintenance_task_descriptions.csv",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_description"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintenanceTaskDescription"
            },
            {
              "name": "taskDescriptionName",
              "type": "CONSTRUCTED_TEXT",
              "template": "task_description_{StepId}"
            },
            {
              "name": "maintenanceTaskDescriptionText",
              "type": "TEXT",
              "template": "StepText"
            },
            {
              "name": "denotes",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}"
            }
          ]
        },
        {
          "filename": "actions.csv",
          "extractable_from_entity": "Activity",
          "conditional_on": "IsAtomic",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_action_{EXTRACTED(F)}"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintenanceActivity"
            },
            {
              "name": "actionName",
              "type": "CONSTRUCTED_TEXT",
              "template": "{EXTRACTED}"
            },
            {
              "name": "actionOf",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}"
            }
          ]
        },
        {
          "filename": "maintainable_items.csv",
          "extractable_from_entity": "Item",
          "conditional_on": "IsAtomic",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_Item_{EXTRACTED(F)}"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintainableItem"
            },
            {
              "name": "maintainableItemName",
              "type": "CONSTRUCTED_TEXT",
              "template": "{EXTRACTED}"
            },
            {
              "name": "participantIn",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}"
            }
          ]
        }
      ]
    }
  ]
}
