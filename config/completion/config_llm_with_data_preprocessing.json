{
  "output_data_folder": "data/output/datafiles",
  "prefix": "proc:",
  "data_transformation_items": [
    {
      "input_data_filepath": "data/input/base_procedure_document.csv",
      "output_schema": [
        {
          "filename": "procedures.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "ProcedureId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintenanceProcedureProcess"
            },
            {
              "name": "procedureDocumentIri",
              "type": "CONSTRUCTED_IRI",
              "template": "{ProcedureId}_document"
            },
            {
              "name": "procedureName",
              "type": "TEXT",
              "template": "ProcedureName"
            }
          ]
        },
        {
          "filename": "procedure_documents.csv",
          "rdfs_type": "ompd:MaintenanceProcedureDocument",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{ProcedureId}_document"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintenanceProcedureDocument"
            },
            {
              "name": "documentLabel",
              "type": "CONSTRUCTED_TEXT",
              "template": "documentLabel_{ProcedureId}"
            },
            {
              "name": "hasTitle",
              "type": "TEXT",
              "template": "ProcedureName"
            }
          ]
        }
      ]
    },
    {
      "input_data_filepath": "data/input/base_procedure_hazards.csv",
      "output_schema": [
        {
          "filename": "hazard.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "HazardId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:Hazard"
            },
            {
              "name": "processIri",
              "type": "IRI",
              "template": "ProcessId"
            },
            {
              "name": "hazardLabel",
              "type": "CONSTRUCTED_TEXT",
              "template": "hazard_{HazardId}"
            },
            {
              "name": "hazardRealisationProcess",
              "type": "CONSTRUCTED_IRI",
              "template": "hazard_realisation_process_{HazardId}"
            },
            {
              "name": "hasHazardDescription",
              "type": "TEXT",
              "template": "HazardDescription"
            }
          ]
        }
      ]
    },
    {
      "input_data_filepath": "data/input/base_procedure_tools.csv",
      "output_schema": [
        {
          "filename": "tools.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "ToolId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:Tool"
            },
            {
              "name": "processIri",
              "type": "IRI",
              "template": "ProcedureId"
            },
            {
              "name": "toolLabel",
              "type": "CONSTRUCTED_TEXT",
              "template": "tool_{ToolId}"
            },
            {
              "name": "hasToolName",
              "type": "TEXT",
              "template": "Name"
            },
            {
              "name": "hasUnits",
              "type": "TEXT",
              "template": "Units"
            },
            {
              "name": "hasQuantity",
              "type": "TEXT",
              "template": "Quantity"
            }
          ]
        }
      ]
    },
    {
      "input_data_filepath": "data/input/base_procedure_materials.csv",
      "output_schema": [
        {
          "filename": "materials.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "MaterialId"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:Material"
            },
            {
              "name": "processIri",
              "type": "IRI",
              "template": "ProcedureId"
            },
            {
              "name": "materialLabel",
              "type": "CONSTRUCTED_TEXT",
              "template": "material_{MaterialId}"
            },
            {
              "name": "hasMaterialDescription",
              "type": "TEXT",
              "template": "Material"
            },
            {
              "name": "hasUnits",
              "type": "TEXT",
              "template": "Units"
            },
            {
              "name": "hasQuantity",
              "type": "TEXT",
              "template": "Quantity"
            }
          ]
        }
      ]
    },
    {
      "input_data_filepath": "data/input/base_procedure_tasks.csv",
      "data_preprocessing_tasks": [
        {
          "type": "SPLIT_SENTENCES",
          "required_columns": [
            {
              "key": "id_column",
              "value": "StepId"
            },
            {
              "key": "parent_id_column",
              "value": "ParentStepId"
            },
            {
              "key": "text_column",
              "value": "StepText"
            },
            {
              "key": "sequence_column",
              "value": "Sequence"
            }
          ]
        },
        {
          "type": "CONVERT_SEQUENCE_TO_BEFORE_RELATION",
          "required_columns": [
            {
              "key": "id_column",
              "value": "StepId"
            },
            {
              "key": "parent_id_column",
              "value": "ParentStepId"
            },
            {
              "key": "group_id_column",
              "value": "ProcedureId"
            },
            {
              "key": "sequence_column",
              "value": "Sequence"
            },
            {
              "key": "output_column",
              "value": "BeforeStepId"
            }
          ]
        },
        {
          "type": "CHECK_ATOMICITY",
          "required_columns": [
            {
              "key": "id_column",
              "value": "StepId"
            },
            {
              "key": "parent_id_column",
              "value": "ParentStepId"
            },
            {
              "key": "output_column",
              "value": "IsAtomic"
            }
          ]
        },
        {
          "type": "SET_PARENT_FOR_TOP_LEVEL_TASK",
          "required_columns": [
            {
              "key": "id_column",
              "value": "StepId"
            },
            {
              "key": "group_id_column",
              "value": "ProcedureId"
            },
            {
              "key": "parent_id_column",
              "value": "ParentStepId"
            }
          ]
        }
      ],
      "text_preprocessing_tasks": [
        "LOWER",
        "LEMMATIZATION",
        "REMOVE_PUNCTUATION"
      ],
      "extraction_conditional_on_field": "IsAtomic",
      "ner_model": {
        "name": "gpt-3.5-turbo",
        "type": "OPENAI_NER",
        "template_path": "config/completion/prompt_template_ner.json"
      },
      "relationship_model": {
        "name": "gpt-3.5-turbo",
        "type": "OPENAI_RELATIONS",
        "template_path": "config/completion/prompt_template_relations.json"
      },
      "text_field": "StepText",
      "output_schema": [
        {
          "filename": "maintenance_tasks.csv",
          "columns": [
            {
              "name": "iri",
              "type": "IRI",
              "template": "StepId"
            },
            {
              "name": "type",
              "type": "CONSTRUCTED_IRI",
              "template": "MaintenaceTaskIn_{ProcedureId}"
            },
            {
              "name": "procedureIri",
              "type": "IRI",
              "template": "ProcedureId"
            },
            {
              "name": "taskName",
              "type": "CONSTRUCTED_TEXT",
              "template": "task_{StepId}"
            },
            {
              "name": "beforeMaintenanceTaskIri",
              "type": "IRI",
              "template": "BeforeStepId"
            },
            {
              "name": "parentMaintenanceTaskIri",
              "type": "IRI",
              "template": "ParentStepId"
            }
          ]
        },
        {
          "filename": "maintenance_task_descriptions.csv",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_description"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:MaintenanceTaskDescription"
            },
            {
              "name": "taskDescriptionName",
              "type": "CONSTRUCTED_TEXT",
              "template": "task_description_{StepId}"
            },
            {
              "name": "maintenanceTaskDescriptionText",
              "type": "TEXT",
              "template": "StepText"
            },
            {
              "name": "denotes",
              "type": "IRI",
              "template": "StepId"
            }
          ]
        },
        {
          "filename": "actions_extracted.csv",
          "extractable_from_entity": "ACTIVITY",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_action_{EXTRACTED(F)}"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "proc:AtomicAction, proc:Extracted"
            },
            {
              "name": "actionName",
              "type": "CONSTRUCTED_TEXT",
              "template": "{EXTRACTED}"
            },
            {
              "name": "actionOf",
              "type": "IRI",
              "template": "StepId"
            }
          ]
        },
        {
          "filename": "action_item_relationship.csv",
          "extractable_from_relation": "PERFORMED_ON",
          "columns": [
            {
              "name": "sourceIri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_action_{EXTRACTED(F)}"
            },
            {
              "name": "relation",
              "type": "LITERAL",
              "template": "proc:performedOn"
            },
            {
              "name": "targetIri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_Item_{EXTRACTED(F)}"
            }
          ]
        },
        {
          "filename": "physical_object_extracted.csv",
          "extractable_from_entity": "ITEM",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_Item_{EXTRACTED(F)}"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:PhysicalObject, proc:Extracted"
            },
            {
              "name": "name",
              "type": "CONSTRUCTED_TEXT",
              "template": "{EXTRACTED}"
            },
            {
              "name": "participantIn",
              "type": "IRI",
              "template": "StepId"
            }
          ]
        },
        {
          "filename": "tools_extracted.csv",
          "extractable_from_entity": "TOOL",
          "columns": [
            {
              "name": "iri",
              "type": "CONSTRUCTED_IRI",
              "template": "{StepId}_tool_{EXTRACTED(F)}"
            },
            {
              "name": "type",
              "type": "LITERAL",
              "template": "ompd:Tool, proc:Extracted"
            },
            {
              "name": "toolName",
              "type": "CONSTRUCTED_TEXT",
              "template": "{EXTRACTED}"
            },
            {
              "name": "participantIn",
              "type": "IRI",
              "template": "StepId"
            }
          ]
        }
      ]
    }
  ]
}
